"use strict";(self["webpackChunkrumathra_bingo"]=self["webpackChunkrumathra_bingo"]||[]).push([[37],{680:function(e,t,i){i.r(t),i.d(t,{default:function(){return le}});var n=i(252);const o={key:0},s={class:"position-absolute left-0 bottom-0 d-flex"},l={key:1},r=(0,n._)("h1",null,[(0,n.Uk)("Erstelle ein neues Bingo. Füge der URL einfach ein ?bingo=BINGO_NAME hinzu um ein neues Bingo hinzuzufügen. "),(0,n._)("br"),(0,n.Uk)(" Wenn du ein existierendes Bingo bearbeiten möchtest, gebe einfach den Namen des Bingos in die URL ein anstatt BINGO_NAME. ")],-1),a=[r];function c(e,t,i,r,c,d){const u=(0,n.up)("BingoComponent"),g=(0,n.up)("SaveButtonAtom"),h=(0,n.up)("EditButtonAtom"),m=(0,n.up)("EditMouseOverButtonAtom"),p=(0,n.up)("EditBingoGifButtonAtom");return c.show?((0,n.wg)(),(0,n.iD)("div",o,[(0,n.Wm)(u),(0,n._)("div",s,[(0,n.Wm)(g,{class:"p-3"}),(0,n.Wm)(h,{class:"p-3"}),(0,n.Wm)(m,{class:"p-3"}),(0,n.Wm)(p,{class:"p-3"})])])):((0,n.wg)(),(0,n.iD)("div",l,a))}const d={class:"edit-button"};function u(e,t,i,o,s,l){return(0,n.wg)(),(0,n.iD)("div",d,[(0,n._)("button",{class:"btn btn-secondary",onClick:t[0]||(t[0]=e=>l.triggerEditEvent())},"Edit")])}var g={name:"EditButtonAtom",data(){return{edit:!1}},methods:{triggerEditEvent(){const e=this.$el.firstChild;e.innerHTML=this.edit?"Edit":"Editting",e.classList.toggle("btn-danger"),this.edit=!this.edit,document.dispatchEvent(new CustomEvent("editBingo"))}}},h=i(744);const m=(0,h.Z)(g,[["render",u]]);var p=m;const b={class:"mb-3 w-50"},v=(0,n._)("label",{for:"bingoGifInput",class:"form-label"},"Das Bingo Gif (Gebe einen Discord Link ein) (NUR gif)",-1),f=["value"],y=(0,n._)("div",{class:"invalid-feedback"}," Please provide a discord image path ",-1),S=(0,n._)("div",{class:"valid-feedback"}," Looks good! Saved the path. ",-1);function q(e,t,i,o,s,l){return(0,n.wg)(),(0,n.iD)("div",b,[v,(0,n._)("input",{type:"email",class:"form-control",id:"bingoGifInput",placeholder:"https://cdn.discordapp.com/attachments/xxx/xxx/YOUR_GIF.png",value:l.getImage()},null,8,f),y,S])}var x={name:"EditMouseOverButtonAtom",data(){return{validExtensions:["gif"]}},mounted(){this.$el.querySelector("input").addEventListener("focusout",this.handleFileSelect,!1)},methods:{handleFileSelect(e){const t=e.target.value;if(!t)return this.validation(!0),void this.saveImage("");const i=new URL(t).hostname;if("cdn.discordapp.com"!==i)return void this.validation(!1);const n=t.split("?")[0],o=n.split(".").pop().toLowerCase();this.validExtensions.includes(o)?(this.validation(!0),this.saveImage(n)):this.validation(!1)},validation(e){e?(this.$el.querySelector("input").classList.remove("is-invalid"),this.$el.querySelector("input").classList.add("is-valid")):(this.$el.querySelector("input").classList.remove("is-valid"),this.$el.querySelector("input").classList.add("is-invalid"))},saveImage(e){const t=this.$route.query.bingo,i=new Date,n=new Date;n.setFullYear(i.getFullYear()+1);const o=n.toUTCString();document.cookie=`bingoGif${t}=${e}; expires=${o}; path=/; sameSite=strict;`},getImage(){const e=this.$route.query.bingo,t=`; ${document.cookie}`,i=t.split(`; bingoGif${e}=`),n=i.pop().split(";").shift();return n}}};const E=(0,h.Z)(x,[["render",q]]);var $=E;const k={class:"mb-3 w-50"},B=(0,n._)("label",{for:"hoverImageInput",class:"form-label"},"Das Hover Bild (Gebe einen Discord Link ein) (NUR png oder jpg)",-1),w=["value"],I=(0,n._)("div",{class:"invalid-feedback"}," Please provide a discord image path ",-1),C=(0,n._)("div",{class:"valid-feedback"}," Looks good! Saved the path. ",-1);function _(e,t,i,o,s,l){return(0,n.wg)(),(0,n.iD)("div",k,[B,(0,n._)("input",{type:"email",class:"form-control",id:"hoverImageInput",placeholder:"https://cdn.discordapp.com/attachments/xxx/xxx/YOUR_IMAGE.png",value:l.getImage()},null,8,w),I,C])}var D={name:"EditMouseOverButtonAtom",data(){return{validExtensions:["png","jpg","jpeg"]}},mounted(){this.$el.querySelector("input").addEventListener("focusout",this.handleFileSelect,!1)},methods:{handleFileSelect(e){const t=e.target.value;if(!t)return this.validation(!0),void this.saveImage("");const i=new URL(t).hostname;if("cdn.discordapp.com"!==i)return void this.validation(!1);const n=t.split("?")[0],o=n.split(".").pop().toLowerCase();this.validExtensions.includes(o)?(this.validation(!0),this.saveImage(n)):this.validation(!1)},validation(e){e?(this.$el.querySelector("input").classList.remove("is-invalid"),this.$el.querySelector("input").classList.add("is-valid")):(this.$el.querySelector("input").classList.remove("is-valid"),this.$el.querySelector("input").classList.add("is-invalid"))},saveImage(e){const t=this.$route.query.bingo,i=new Date,n=new Date;n.setFullYear(i.getFullYear()+1);const o=n.toUTCString();document.cookie=`hoverImage${t}=${e}; expires=${o}; path=/; sameSite=strict;`},getImage(){const e=this.$route.query.bingo,t=`; ${document.cookie}`,i=t.split(`; hoverImage${e}=`),n=i.pop().split(";").shift();return n}}};const L=(0,h.Z)(D,[["render",_]]);var A=L;const N={class:"save-button"};function O(e,t,i,o,s,l){return(0,n.wg)(),(0,n.iD)("div",N,[(0,n._)("button",{class:"btn btn-success",onClick:t[0]||(t[0]=(...e)=>l.save&&l.save(...e))},"Save")])}var G={name:"SaveButtonAtom",methods:{save(){const e=document.querySelector("table"),t=e.querySelectorAll("tr"),i=[];for(let n=0;n<t.length;n++){const e=t[n],o=e.querySelectorAll("td"),s=[];for(let t=0;t<o.length;t++){const e=o[t];s.push(e.innerText.trim())}i.push(s)}i.shift(),this.saveCookie(i),alert("Successfully saved!")},saveCookie(e){const t=this.$route.query.bingo,i=new Date,n=new Date;n.setFullYear(i.getFullYear()+1);const o=n.toUTCString();document.cookie=`bingo${t}=${JSON.stringify(e)}; expires=${o}; path=/; sameSite=strict;`}}};const T=(0,h.Z)(G,[["render",O]]);var F=T,Y=i(577);const z={class:"section-bingo"},H={class:"section-bingo--animation",id:"bingo-container"},U=["src"],R={class:"bg-white show"},M=(0,n._)("tr",{class:"user-select-none text-center fs-3"},[(0,n._)("th",{"data-fixed":"true"},"B"),(0,n._)("th",{"data-fixed":"true"},"I"),(0,n._)("th",{"data-fixed":"true"},"N"),(0,n._)("th",{"data-fixed":"true"},"G"),(0,n._)("th",{"data-fixed":"true"},"O")],-1);function W(e,t,i,o,s,l){const r=(0,n.up)("BingoBoxAtom");return(0,n.wg)(),(0,n.iD)("section",z,[(0,n._)("div",H,[(0,n._)("img",{src:l.getBingoGif(),style:{visibility:"hidden"}},null,8,U),(0,n._)("h1",null,(0,Y.zw)(s.snippets.bingoTriggered),1),(0,n._)("table",R,[M,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.tableData,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e,class:"bingo-content"},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e,(e=>((0,n.wg)(),(0,n.iD)("td",{key:e,onClick:t[0]||(t[0]=(...e)=>l.selectTarget&&l.selectTarget(...e)),onContextmenu:t[1]||(t[1]=e=>l.rightClickHandler(e))},[(0,n.Wm)(r,{selected:!1,text:e.text||e,multiSelectNumber:e.multiSelectNumber,multiSelectOptions:JSON.stringify(e?.multiSelectOptions)},null,8,["text","multiSelectNumber","multiSelectOptions"])],32)))),128))])))),128))])])])}var Z=JSON.parse('{"Y":{"color0":"yellow","color1":"red","color2":"purple","color3":"blue","color4":"green"},"z":[["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""]]}');const P=["data-selected","data-multi-select-number","data-multi-select-options"],j=["contenteditable"],J={key:0,class:"bingo-box-multi pointer-events-none d-flex justify-content-space-between mt-3"},K=["data-multi-select-number"];function V(e,t,i,o,s,l){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("input",{hidden:"","data-selected":i.selected,"data-multi-select-number":i.multiSelectNumber,"data-multi-select-options":i.multiSelectOptions,"data-times-pressed":"0","data-times-rounds":"0"},null,8,P),(0,n._)("p",{class:(0,Y.C_)([[s.isEditing||"pointer-events-none"],"text-center user-select-none p-0 m-0 text-uppercase fw-bold py-2"]),contenteditable:s.isEditing},(0,Y.zw)(i.text),11,j),i.multiSelectNumber>0?((0,n.wg)(),(0,n.iD)("div",J,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.multiSelectNumber,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e,class:"bingo-box-multi--item pointer-events-none fw-bold text-black",style:(0,Y.j5)({backgroundColor:i.multiSelectOptions[`color${e}`]})},[(0,n._)("input",{hidden:"","data-multi-select-number":e},null,8,K)],4)))),128))])):(0,n.kq)("",!0)],64)}var Q={name:"BingoBoxAtom",props:{selected:{type:Boolean,default:!1},text:{type:String,default:""},multiSelectNumber:{type:Number,default:0},multiSelectOptions:{type:String,default:""}},data(){return{isEditing:!1,editBingoClicked:!1}},mounted(){document.addEventListener("editBingo",(()=>{this.editBingoClicked=!0,this.editBingoClicked&&this.isEditing!==!this.isEditing&&(this.isEditing=!this.isEditing)})),this.$nextTick((()=>{const e=this.$el;this.changeFontSize(e)})),this.$el.nextElementSibling.nextElementSibling.addEventListener("input",(()=>{const e=this.$el;this.changeFontSize(e)})),this.$el.parentElement.addEventListener("mouseover",(()=>{this.isEditing?document.body.style.cursor="":document.body.style.cursor=`url(${this.getHoverImage()}) 4 12, auto`}))},methods:{changeFontSize(e){const t=e.nextElementSibling.nextElementSibling,i=t.innerHTML;if(i.length<7&&(t.style.fontSize="2rem"),i.length>40){const e=50/i.length;t.style.fontSize=`${e}rem`}i.split(" ").forEach((e=>{const i=e.length;if(i>11){const e=15/i;t.style.fontSize=`${e}rem`}}))},getHoverImage(){const e=this.$route.query.bingo,t=`; ${document.cookie}`,i=t.split(`; hoverImage${e}=`),n=i.pop().split(";").shift().replaceAll("\\","/");return n}}};const X=(0,h.Z)(Q,[["render",V]]);var ee=X,te={name:"BingoComponent",data(){return{tableData:this.getBingoCookie()||Z.z,bingoTriggered:!1,snippets:{bingoTriggered:"BINGO!!"}}},mounted(){const e=document.getElementById("bingo-container"),t=e.querySelector("img"),i=e.querySelector("table");t.style.width=i.offsetWidth-50+"px",t.style.height=`${i.offsetHeight}px`},components:{BingoBoxAtom:ee},methods:{getBingoCookie(){const e=this.$route.query.bingo,t=`; ${document.cookie}`,i=t.split(`; bingo${e}=`),n=i.pop().split(";").shift();try{return JSON.parse(n)}catch(o){return null}},rightClickHandler(e){e.preventDefault();const t=e.target,i=t.firstElementChild;if("true"===i.dataset.fixed)return;i.dataset.selected=!1,i.dataset.timesPressed=0,i.dataset.timesRounds=0,t.style.backgroundColor="";const n=i.dataset.multiSelectNumber>0;n&&t.querySelectorAll(".bingo-box-multi--item").forEach((e=>{e.style.backgroundColor=""}))},selectTarget(e){const t=e.target,i="P"===t.tagName;if(i&&t.isContentEditable||t.lastElementChild.isContentEditable)return;const n=t.querySelector("input");let o;const s="true"===n.dataset.fixed;if(s)return;let l,r=parseInt(n.dataset.timesPressed),a=parseInt(n.dataset.timesRounds),c="true"===n.dataset.selected,d=!1,u=!1;const g=parseInt(n.dataset.multiSelectNumber),h=g>0,m=Z.Y;if(h&&r>0?l=m[`color${a}`]:(l=m["color0"],c=!c),h){c=!1,o=t.querySelector(`.bingo-box-multi--item input[data-multi-select-number="${r+1}"]`),o||(o=t.querySelector('.bingo-box-multi--item input[data-multi-select-number="1"]'),l=m[`color${a+1}`],n.dataset.timesRounds=a+1,r=0);const e=t.querySelector(`.bingo-box-multi--item input[data-multi-select-number="${r+2}"]`);e||(c=!0),o=o.parentElement}else o=t;o.style.backgroundColor=c||h?l:"",n.dataset.selected=c,n.dataset.timesPressed=u?0:r+1,d&&(o.style.backgroundColor=""),this.checkIfBingo((e=>{if(e){if(this.bingoTriggered)return;this.bingoTriggered=!0,this.animateBingo()}}))},checkIfBingo(e){const t=document.querySelector(".section-bingo table"),i=t.querySelectorAll(".bingo-content"),n=t.querySelectorAll("td");let o=!1;i.forEach((t=>{if(o)return;const i=t.querySelectorAll("td"),n=i.length;let s=0;i.forEach((e=>{const t=e.querySelector("input"),i="true"===t.dataset.selected;i&&s++})),o=s===n,e(o)})),n.forEach((i=>{if(o)return;const n=t.querySelectorAll(`td:nth-child(${i.cellIndex+1})`),s=n.length;let l=0;n.forEach((e=>{const t=e.querySelector("input"),i="true"===t.dataset.selected;i&&l++})),o=l===s,e(o)}));const s=()=>{const e=t.querySelector(".bingo-content:nth-child(2) td:first-child"),i=t.querySelector(".bingo-content:nth-child(3) td:nth-child(2)"),n=t.querySelector(".bingo-content:nth-child(4) td:nth-child(3)"),o=t.querySelector(".bingo-content:nth-child(5) td:nth-child(4)"),s=t.querySelector(".bingo-content:nth-child(6) td:nth-child(5)"),l="true"===e.querySelector("input").dataset.selected,r="true"===i.querySelector("input").dataset.selected,a="true"===n.querySelector("input").dataset.selected,c="true"===o.querySelector("input").dataset.selected,d="true"===s.querySelector("input").dataset.selected;return l&&r&&a&&c&&d},l=()=>{const e=t.querySelector(".bingo-content:nth-child(2) td:nth-child(5)"),i=t.querySelector(".bingo-content:nth-child(3) td:nth-child(4)"),n=t.querySelector(".bingo-content:nth-child(4) td:nth-child(3)"),o=t.querySelector(".bingo-content:nth-child(5) td:nth-child(2)"),s=t.querySelector(".bingo-content:nth-child(6) td:nth-child(1)"),l="true"===e.querySelector("input").dataset.selected,r="true"===i.querySelector("input").dataset.selected,a="true"===n.querySelector("input").dataset.selected,c="true"===o.querySelector("input").dataset.selected,d="true"===s.querySelector("input").dataset.selected;return l&&r&&a&&c&&d};e(s()),e(l())},animateBingo(){const e=document.querySelector(".section-bingo--animation");e.classList.add("section-bingo--animation--active"),e.querySelector("h1").style.opacity=1;const t=["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff"];let i=0;const n=setInterval((()=>{e.querySelector("h1").style.color=t[i],i++,i===t.length&&(i=0)}),100);setTimeout((()=>{e.querySelector("h1").style.opacity=0,e.classList.remove("section-bingo--animation--active"),clearInterval(n)}),5e3)},getBingoGif(){const e=this.$route.query.bingo,t=`; ${document.cookie}`,i=t.split(`; bingoGif${e}=`),n=i.pop().split(";").shift().replaceAll("\\","/");return n}}};const ie=(0,h.Z)(te,[["render",W]]);var ne=ie,oe={name:"HomepageView",components:{BingoComponent:ne,SaveButtonAtom:F,EditButtonAtom:p,EditMouseOverButtonAtom:A,EditBingoGifButtonAtom:$},data(){return{show:!1}},mounted(){const e=this.$route.query.bingo;e&&(this.show=!0)}};const se=(0,h.Z)(oe,[["render",c]]);var le=se}}]);
//# sourceMappingURL=Homepage.5b7d2796.js.map