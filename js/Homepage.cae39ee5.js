"use strict";(self["webpackChunkrumathra_bingo"]=self["webpackChunkrumathra_bingo"]||[]).push([[37],{537:function(e,t,n){n.r(t),n.d(t,{default:function(){return ke}});var i=n(252);const o={key:0,class:"d-grid"},s={class:"d-flex m-5 mx-2 row"},l={class:"col-2 d-flex"},r={class:"col-6"},a={class:"col-4"},c={key:1},d=(0,i._)("h1",null,[(0,i.Uk)("Erstelle ein neues Bingo. Füge der URL einfach ein ?bingo=BINGO_NAME hinzu um ein neues Bingo hinzuzufügen. "),(0,i._)("br"),(0,i.Uk)(" Wenn du ein existierendes Bingo bearbeiten möchtest, gebe einfach den Namen des Bingos in die URL ein anstatt BINGO_NAME. ")],-1),u=[d];function m(e,t,n,d,m,g){const b=(0,i.up)("BingoComponent"),h=(0,i.up)("SaveButtonAtom"),p=(0,i.up)("EditButtonAtom"),f=(0,i.up)("EditMouseOverButtonAtom"),v=(0,i.up)("EditBingoGifButtonAtom"),y=(0,i.up)("ShareButtonAtom"),S=(0,i.up)("ImportButtonAtom");return m.show?((0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(b),(0,i._)("div",s,[(0,i._)("div",l,[(0,i.Wm)(h,{class:"w-100"}),(0,i.Wm)(p,{class:"ps-3 w-100"})]),(0,i._)("div",r,[(0,i.Wm)(f,{class:"w-100"}),(0,i.Wm)(v,{class:"w-100"})]),(0,i._)("div",a,[(0,i.Wm)(y,{class:"w-100 mb-3"}),(0,i.Wm)(S,{class:"w-100"})])])])):((0,i.wg)(),(0,i.iD)("div",c,u))}const g={class:"edit-button"};function b(e,t,n,o,s,l){return(0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("button",{class:"btn btn-secondary",onClick:t[0]||(t[0]=e=>l.triggerEditEvent())},"Edit")])}var h={name:"EditButtonAtom",methods:{triggerEditEvent(){const e=this.$el.firstChild;e.innerHTML=this.$root.edit?"Edit":"Editting",e.classList.toggle("btn-danger"),this.$root.edit=!this.$root.edit,document.querySelectorAll(".multi-select-inputs").forEach((e=>{e.classList.toggle("d-none")})),document.cursor="",document.dispatchEvent(new CustomEvent("editBingo"))}}},p=n(744);const f=(0,p.Z)(h,[["render",b]]);var v=f;const y={class:"mb-3 w-50"},S=(0,i._)("label",{for:"bingoGifInput",class:"form-label"},"Das Bingo Gif (Gebe einen Discord Link ein) (NUR gif)",-1),x=["value"],w=(0,i._)("div",{class:"invalid-feedback"}," Please provide a discord image path ",-1),$=(0,i._)("div",{class:"valid-feedback"}," Looks good! Saved the path. ",-1);function q(e,t,n,o,s,l){return(0,i.wg)(),(0,i.iD)("div",y,[S,(0,i._)("input",{type:"email",class:"form-control",id:"bingoGifInput",placeholder:"https://cdn.discordapp.com/attachments/xxx/xxx/YOUR_GIF.png",value:s.bingoGif},null,8,x),w,$])}function _(e,t,n=!1){const i=`; ${document.cookie}`,o=i.split(`; ${e}${t}=`),s=o.pop().split(";").shift();if(!n)return s;try{return JSON.parse(s)}catch(l){return null}}function B(e,t,n){const i=new Date,o=new Date;o.setFullYear(i.getFullYear()+1);const s=o.toUTCString();document.cookie=`${e}${t}=${n}; expires=${s}; path=/; sameSite=strict;`}var E={name:"EditMouseOverButtonAtom",data(){return{validExtensions:["gif"],bingoGif:_("bingoGif",this.$route.query.bingo)}},mounted(){this.$el.querySelector("input").addEventListener("focusout",this.handleFileSelect,!1)},methods:{handleFileSelect(e){const t=e.target.value;if(!t)return this.validation(!0),void B("bingoGif",this.$route.query.bingo,"");const n=new URL(t).hostname;if("cdn.discordapp.com"!==n)return void this.validation(!1);const i=t.split("?")[0],o=i.split(".").pop().toLowerCase();this.validExtensions.includes(o)?(this.validation(!0),B("bingoGif",this.$route.query.bingo,t)):this.validation(!1)},validation(e){const t=this.$el.querySelector("input");t.classList.remove(e?"is-invalid":"is-valid"),t.classList.add(e?"is-valid":"is-invalid")}}};const k=(0,p.Z)(E,[["render",q]]);var A=k;const C={class:"mb-3 w-50"},I=(0,i._)("label",{for:"hoverImageInput",class:"form-label"},"Das Hover Bild (Gebe einen Discord Link ein) (NUR png oder jpg)",-1),N=["value"],D=(0,i._)("div",{class:"invalid-feedback"}," Please provide a discord image path ",-1),G=(0,i._)("div",{class:"valid-feedback"}," Looks good! Saved the path. ",-1);function L(e,t,n,o,s,l){return(0,i.wg)(),(0,i.iD)("div",C,[I,(0,i._)("input",{type:"email",class:"form-control",id:"hoverImageInput",placeholder:"https://cdn.discordapp.com/attachments/xxx/xxx/YOUR_IMAGE.png",value:s.mouseOverImage},null,8,N),D,G])}var O={name:"EditMouseOverButtonAtom",data(){return{validExtensions:["png","jpg","jpeg"],mouseOverImage:_("hoverImage",this.$route.query.bingo)}},mounted(){this.$el.querySelector("input").addEventListener("focusout",this.handleFileSelect,!1)},methods:{handleFileSelect(e){const t=e.target.value;if(!t)return this.validation(!0),void B("hoverImage",this.$route.query.bingo,"");const n=new URL(t).hostname;if("cdn.discordapp.com"!==n)return void this.validation(!1);const i=t.split("?")[0],o=i.split(".").pop().toLowerCase();this.validExtensions.includes(o)?(this.validation(!0),B("hoverImage",this.$route.query.bingo,t)):this.validation(!1)},validation(e){const t=this.$el.querySelector("input");t.classList.remove(e?"is-invalid":"is-valid"),t.classList.add(e?"is-valid":"is-invalid")}}};const T=(0,p.Z)(O,[["render",L]]);var z=T;const M={class:"import-button"},F={class:"input-group"},R={class:"d-grid w-100"},U=(0,i._)("span",null,"Importiere ein Bingo",-1);function j(e,t,n,o,s,l){return(0,i.wg)(),(0,i.iD)("div",M,[(0,i._)("div",F,[(0,i._)("div",R,[U,(0,i._)("input",{type:"file",class:"form-control w-100",onChange:t[0]||(t[0]=(...e)=>l.importBingo&&l.importBingo(...e)),"aria-describedby":"inputGroupFileAddon04","aria-label":"Upload",ref:"file"},null,544)])])])}var H={name:"ImportButtonAtom",methods:{importBingo(){const e=this.$refs.file.files[0],t=new FileReader;t.onload=t=>{const n=JSON.parse(t.target.result),i="application/json"===e.type||"object"===typeof n||5===n.bingo[0].length;if(!i)return void alert("Invalid file type or invalid JSON File. Please upload a JSON file.");const o=n.bingo,s=document.querySelector("table"),l=s.querySelectorAll("tr:not(:first-child)");for(let e=0;e<l.length;e++){const t=l[e],n=t.querySelectorAll("td");for(let i=0;i<n.length;i++){const t=n[i],s=t.querySelector("p");s.innerText=o[e][i].text;const l=t.querySelector(".bingo-box-field-data");l.dataset.multiSelectNumber=o[e][i].multiSelectNumber||0}}},alert("Successfully imported! Please save your bingo and reload the page to see all changes."),t.readAsText(e)}}};const W=(0,p.Z)(H,[["render",j]]);var Z=W;const Y={class:"save-button"};function J(e,t,n,o,s,l){return(0,i.wg)(),(0,i.iD)("div",Y,[(0,i._)("button",{class:"btn btn-success",onClick:t[0]||(t[0]=(...e)=>l.save&&l.save(...e))},"Save")])}var P={name:"SaveButtonAtom",methods:{save(){const e=document.querySelector("table"),t=e.querySelectorAll("tr"),n=[];for(let i=0;i<t.length;i++){const e=t[i],o=e.querySelectorAll("td"),s=[];for(let t=0;t<o.length;t++){const e=o[t];s.push({text:e.innerText.trim(),multiSelectNumber:parseInt(e.querySelector(".bingo-box-field-data").dataset.multiSelectNumber)})}n.push(s)}n.shift(),B("bingo",this.$route.query.bingo,JSON.stringify(n)),alert("Successfully saved!")}}};const K=(0,p.Z)(P,[["render",J]]);var V=K;const Q={class:"share-button"};function X(e,t,n,o,s,l){return(0,i.wg)(),(0,i.iD)("div",Q,[(0,i._)("button",{class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>l.share&&l.share(...e))},"Share")])}var ee={name:"ShareButtonAtom",methods:{share(){const e={hoverImage:_("hoverImage",this.$route.query.bingo),bingoGif:_("bingoGif",this.$route.query.bingo),bingo:_("bingo",this.$route.query.bingo,!0)},t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"});this.download(n)},download(e){const t=document.createElement("a");t.download="bingo.json",t.href=URL.createObjectURL(e),document.body.appendChild(t),t.click(),document.body.removeChild(t)}}};const te=(0,p.Z)(ee,[["render",X]]);var ne=te,ie=n(577);const oe={class:"section-bingo"},se={class:"section-bingo--animation",id:"bingo-container"},le=["src"],re={class:"bg-white show"},ae=(0,i._)("tr",{class:"user-select-none text-center fs-3"},[(0,i._)("th",{"data-fixed":"true"},"B"),(0,i._)("th",{"data-fixed":"true"},"I"),(0,i._)("th",{"data-fixed":"true"},"N"),(0,i._)("th",{"data-fixed":"true"},"G"),(0,i._)("th",{"data-fixed":"true"},"O")],-1),ce=["data-trindex","data-tdindex","checked"],de=["value","data-trindex","data-tdindex"];function ue(e,t,n,o,s,l){const r=(0,i.up)("BingoBoxAtom");return(0,i.wg)(),(0,i.iD)("section",oe,[(0,i._)("div",se,[(0,i._)("img",{src:s.bingoGif,style:{visibility:"hidden"}},null,8,le),(0,i._)("h1",null,(0,ie.zw)(s.snippets.bingoTriggered),1),(0,i._)("table",re,[ae,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.tableData,((n,o)=>((0,i.wg)(),(0,i.iD)("tr",{key:n,class:"bingo-content"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n,((n,s)=>((0,i.wg)(),(0,i.iD)("td",{key:n,onClick:t[2]||(t[2]=(...e)=>l.selectTarget&&l.selectTarget(...e)),onContextmenu:t[3]||(t[3]=e=>l.rightClickHandler(e))},[(0,i._)("div",{class:(0,ie.C_)(["multi-select-inputs d-flex",[e.$root.edit||"d-none"]])},[(0,i._)("input",{class:(0,ie.C_)(["form-check-input multi-select-check-input",`multiSelect-${o}-${s}`]),type:"checkbox",onClick:t[0]||(t[0]=(...e)=>l.triggerMulitSelect&&l.triggerMulitSelect(...e)),"data-trindex":o,"data-tdindex":s,checked:n.multiSelectNumber>0},null,10,ce),(0,i._)("input",{class:(0,ie.C_)(["form-control multi-select-text-input",`multiSelect-${o}-${s}`]),type:"text",value:n.multiSelectNumber||2,"data-trindex":o,"data-tdindex":s,min:"1",max:"11",onChange:t[1]||(t[1]=(...e)=>l.updateMultiSelectNumber&&l.updateMultiSelectNumber(...e))},null,42,de)],2),(0,i._)("div",{class:(0,ie.C_)(["d-flex flex-column h-100",[n.multiSelectNumber>0?"justify-content-end":"justify-content-center"]])},[(0,i.Wm)(r,{tableContent:n},null,8,["tableContent"])],2)],32)))),128))])))),128))])])])}function me(){const e=document.querySelector(".section-bingo--animation");e.classList.add("section-bingo--animation--active"),e.querySelector("h1").style.opacity=1;const t=["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff"];let n=0;const i=setInterval((()=>{e.querySelector("h1").style.color=t[n],n++,n===t.length&&(n=0)}),100);setTimeout((()=>{e.querySelector("h1").style.opacity=0,e.classList.remove("section-bingo--animation--active"),clearInterval(i)}),5e3)}function ge(e){const t=document.querySelector(".section-bingo table"),n=t.querySelectorAll(".bingo-content"),i=t.querySelectorAll("td");let o=!1;const s=function(n){n.forEach((function(n){if(o)return!1;const i="number"===typeof n.cellIndex,s=i?t.querySelectorAll(`td:nth-child(${n.cellIndex+1})`):n.querySelectorAll("td"),l=s.length;let r=0;return s.forEach((function(e){"true"===e.querySelector(".bingo-box-field-data").dataset.selected&&r++})),e(r===l&&r>=5)}))};s(n),s(i);const l=(e,n)=>{const i=n.map(((n,i)=>t.querySelector(`.bingo-content:nth-child(${e+i}) td:nth-child(${n})`)));return i.every((e=>"true"===e.querySelector(".bingo-box-field-data").dataset.selected))},r=()=>l(2,[1,2,3,4,5]),a=()=>l(2,[5,4,3,2,1]);e(r()),e(a())}var be=JSON.parse('{"z":[["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""]]}');const he=["data-selected","data-multi-select-number"],pe=["contenteditable"],fe={key:0,class:"bingo-box-multi row pointer-events-none d-flex justify-content-space-between mt-3"},ve=["data-multi-select-number"];function ye(e,t,n,o,s,l){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("input",{hidden:"","data-selected":s.selected,"data-multi-select-number":s.multiSelectNumber,"data-times-pressed":"0","data-times-rounds":"0",class:"bingo-box-field-data d-none"},null,8,he),(0,i._)("p",{class:(0,ie.C_)([[e.$root.edit||"pointer-events-none"],"text-center user-select-none p-0 m-0 text-uppercase fw-bold py-2"]),contenteditable:e.$root.edit},(0,ie.zw)(s.text),11,pe),s.multiSelectNumber>0?((0,i.wg)(),(0,i.iD)("div",fe,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.multiSelectNumber,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"bingo-box-multi--item pointer-events-none fw-bold text-black col"},[(0,i._)("input",{hidden:"","data-multi-select-number":e},null,8,ve)])))),128))])):(0,i.kq)("",!0)],64)}var Se={name:"BingoBoxAtom",props:{tableContent:{type:Object,required:!0}},data(){return{text:this.tableContent.text,multiSelectNumber:this.tableContent.multiSelectNumber,selected:!1}},mounted(){this.$nextTick((()=>{const e=this.$el;this.changeFontSize(e)})),this.$el.nextElementSibling.nextElementSibling.addEventListener("input",(()=>{const e=this.$el;this.changeFontSize(e)})),this.$el.parentElement.addEventListener("mouseover",(()=>{if(this.$root.edit)return void(document.body.style.cursor="");const e=_("hoverImage",this.$route.query.bingo);document.body.style.cursor=`url(${e}) 4 12, auto`}))},methods:{changeFontSize(e){const t=e.nextElementSibling.nextElementSibling,n=parseInt(t.previousElementSibling.dataset.multiSelectNumber)>0,i=t.innerHTML;i.length<7&&(t.style.fontSize="2rem");const o=n?20:40;if(i.length>o){const e=n?40:60,o=e/i.length;t.style.fontSize=`${o}rem`}i.split(" ").forEach((e=>{const n=e.length;if(n>11){const e=15/n;t.style.fontSize=`${e}rem`}}))}}};const xe=(0,p.Z)(Se,[["render",ye]]);var we=xe,$e={name:"BingoComponent",data(){return{tableData:_("bingo",this.$route.query.bingo,!0)||be.z,bingoTriggered:!1,snippets:{bingoTriggered:"BINGO!!"},bingoGif:_("bingoGif",this.$route.query.bingo),colorOptions:{color0:"yellow",color1:"red",color2:"purple",color3:"blue",color4:"green"}}},mounted(){this.resizeBingoGif()},components:{BingoBoxAtom:we},methods:{resizeBingoGif(){const e=document.getElementById("bingo-container"),t=e.querySelector("img"),n=e.querySelector("table");t.style.width=n.offsetWidth-50+"px",t.style.height=`${n.offsetHeight}px`},rightClickHandler(e){e.preventDefault();const t=e.target,n=t.firstElementChild;if("true"===n.dataset.fixed)return;n.dataset.selected=!1,n.dataset.timesPressed=0,n.dataset.timesRounds=0,t.style.backgroundColor="";const i=n.dataset.multiSelectNumber>0;i&&t.querySelectorAll(".bingo-box-multi--item").forEach((e=>{e.style.backgroundColor=""}))},selectTarget(e){if(this.$root.edit)return;const t=e.target,n=t.querySelector(".bingo-box-field-data"),i="true"===n.dataset.fixed;if(i)return;let o,s=parseInt(n.dataset.timesPressed),l=parseInt(n.dataset.timesRounds),r="true"===n.dataset.selected;const a=parseInt(n.dataset.multiSelectNumber),c=a>0,d=this.colorOptions;c&&s>0?o=d[`color${l}`]:(o=d["color0"],r=!r);let u=null;if(c){r=!1,u=t.querySelector(`.bingo-box-multi--item input[data-multi-select-number="${s+1}"]`),u||(u=t.querySelector('.bingo-box-multi--item input[data-multi-select-number="1"]'),o=d[`color${l+1}`],n.dataset.timesRounds=l+1,s=0);const e=t.querySelector(`.bingo-box-multi--item input[data-multi-select-number="${s+2}"]`);e||(r=!0),u=u.parentElement}else u=t;u.style.backgroundColor=r||c?o:"",n.dataset.selected=r,n.dataset.timesPressed=s+1,ge((e=>{if(e){if(this.bingoTriggered)return;this.bingoTriggered=!0,me()}}))},triggerMulitSelect(e){const t=e.target,n=t.checked,i=t.dataset.trindex,o=t.dataset.tdindex,s={text:this.tableData[i][o].text,multiSelectNumber:2},l={text:this.tableData[i][o].text};this.tableData[i][o]=n?s:l},updateMultiSelectNumber(e){const t=e.target,n=t.dataset.trindex,i=t.dataset.tdindex,o=parseInt(t.value),s={text:this.tableData[n][i].text,multiSelectNumber:o};this.tableData[n][i]=s}}};const qe=(0,p.Z)($e,[["render",ue]]);var _e=qe,Be={name:"HomepageView",components:{BingoComponent:_e,SaveButtonAtom:V,EditButtonAtom:v,EditMouseOverButtonAtom:z,EditBingoGifButtonAtom:A,ShareButtonAtom:ne,ImportButtonAtom:Z},data(){return{show:!1}},mounted(){const e=this.$route.query.bingo;e&&(this.show=!0)}};const Ee=(0,p.Z)(Be,[["render",m]]);var ke=Ee}}]);
//# sourceMappingURL=Homepage.cae39ee5.js.map