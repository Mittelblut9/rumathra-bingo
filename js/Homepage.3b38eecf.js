"use strict";(self["webpackChunkrumathra_bingo"]=self["webpackChunkrumathra_bingo"]||[]).push([[37],{716:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ie}});var i=n(252);const o={key:0,class:"d-grid"},s={class:"bingo-settings d-grid m-5 mx-2 position-fixed left-50 bottom-0 w-100"},l={class:"bingo-settings-trigger cursor-pointer"},r={class:"d-grid me-5",style:{"justify-items":"center"}},a={class:"row"},c={class:"col-2 d-flex"},d={class:"col-6"},u={class:"col-4"},m={key:1},g=(0,i._)("h1",null,[(0,i.Uk)("Erstelle ein neues Bingo. Füge der URL einfach ein ?bingo=BINGO_NAME hinzu um ein neues Bingo hinzuzufügen. "),(0,i._)("br"),(0,i.Uk)(" Wenn du ein existierendes Bingo bearbeiten möchtest, gebe einfach den Namen des Bingos in die URL ein anstatt BINGO_NAME. ")],-1),h=[g];function b(e,t,n,g,b,p){const f=(0,i.up)("BingoComponent"),v=(0,i.up)("SaveButtonAtom"),y=(0,i.up)("EditButtonAtom"),S=(0,i.up)("EditMouseOverButtonAtom"),x=(0,i.up)("EditBingoGifButtonAtom"),w=(0,i.up)("ShareButtonAtom"),$=(0,i.up)("ImportButtonAtom");return b.show?((0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(f),(0,i._)("div",s,[(0,i._)("div",l,[(0,i._)("div",r,[(0,i._)("img",{width:"26",height:"26",src:"https://img.icons8.com/metro/52/down--v1.png",alt:"down--v1",onClick:t[0]||(t[0]=(...e)=>p.showSettings&&p.showSettings(...e))}),(0,i._)("p",{onClick:t[1]||(t[1]=(...e)=>p.showSettings&&p.showSettings(...e))},"Settings")])]),(0,i._)("div",a,[(0,i._)("div",c,[(0,i.Wm)(v,{class:"w-100"}),(0,i.Wm)(y,{class:"ps-3 w-100"})]),(0,i._)("div",d,[(0,i.Wm)(S,{class:"w-100"}),(0,i.Wm)(x,{class:"w-100"})]),(0,i._)("div",u,[(0,i.Wm)(w,{class:"w-100 mb-3"}),(0,i.Wm)($,{class:"w-100"})])])])])):((0,i.wg)(),(0,i.iD)("div",m,h))}const p={class:"edit-button"};function f(e,t,n,o,s,l){return(0,i.wg)(),(0,i.iD)("div",p,[(0,i._)("button",{class:"btn btn-secondary",onClick:t[0]||(t[0]=e=>l.triggerEditEvent())},"Edit")])}var v={name:"EditButtonAtom",methods:{triggerEditEvent(){const e=this.$el.firstChild;e.innerHTML=this.$root.edit?"Edit":"Editting",e.classList.toggle("btn-danger"),this.$root.edit=!this.$root.edit,document.querySelectorAll(".multi-select-inputs").forEach((e=>{e.classList.toggle("d-none")})),document.cursor="",document.dispatchEvent(new CustomEvent("editBingo"))}}},y=n(744);const S=(0,y.Z)(v,[["render",f]]);var x=S;const w={class:"mb-3 w-50"},$=(0,i._)("label",{for:"bingoGifInput",class:"form-label"},"Das Bingo Gif (Gebe einen Discord Link ein) (NUR gif)",-1),_=["value"],q=(0,i._)("div",{class:"invalid-feedback"}," Please provide a discord image path ",-1),B=(0,i._)("div",{class:"valid-feedback"}," Looks good! Saved the path. ",-1);function k(e,t,n,o,s,l){return(0,i.wg)(),(0,i.iD)("div",w,[$,(0,i._)("input",{type:"email",class:"form-control",id:"bingoGifInput",placeholder:"https://cdn.discordapp.com/attachments/xxx/xxx/YOUR_GIF.png",value:s.bingoGif},null,8,_),q,B])}function E(e,t,n=!1){const i=`; ${document.cookie}`,o=i.split(`; ${e}${t}=`),s=o.pop().split(";").shift();if(!n)return s;try{return JSON.parse(s)}catch(l){return null}}function C(e,t,n){const i=new Date,o=new Date;o.setFullYear(i.getFullYear()+1);const s=o.toUTCString();document.cookie=`${e}${t}=${n}; expires=${s}; path=/; sameSite=strict;`}var A={name:"EditMouseOverButtonAtom",data(){return{validExtensions:["gif"],bingoGif:E("bingoGif",this.$route.query.bingo)}},mounted(){this.$el.querySelector("input").addEventListener("focusout",this.handleFileSelect,!1)},methods:{handleFileSelect(e){const t=e.target.value;if(!t)return this.validation(!0),void C("bingoGif",this.$route.query.bingo,"");const n=new URL(t).hostname;if("cdn.discordapp.com"!==n)return void this.validation(!1);const i=t.split("?")[0],o=i.split(".").pop().toLowerCase();this.validExtensions.includes(o)?(this.validation(!0),C("bingoGif",this.$route.query.bingo,t)):this.validation(!1)},validation(e){const t=this.$el.querySelector("input");t.classList.remove(e?"is-invalid":"is-valid"),t.classList.add(e?"is-valid":"is-invalid")}}};const I=(0,y.Z)(A,[["render",k]]);var N=I;const D={class:"mb-3 w-50"},G=(0,i._)("label",{for:"hoverImageInput",class:"form-label"},"Das Hover Bild (Gebe einen Discord Link ein) (NUR png oder jpg)",-1),L=["value"],O=(0,i._)("div",{class:"invalid-feedback"}," Please provide a discord image path ",-1),j=(0,i._)("div",{class:"valid-feedback"}," Looks good! Saved the path. ",-1);function z(e,t,n,o,s,l){return(0,i.wg)(),(0,i.iD)("div",D,[G,(0,i._)("input",{type:"email",class:"form-control",id:"hoverImageInput",placeholder:"https://cdn.discordapp.com/attachments/xxx/xxx/YOUR_IMAGE.png",value:s.mouseOverImage},null,8,L),O,j])}var M={name:"EditMouseOverButtonAtom",data(){return{validExtensions:["png","jpg","jpeg"],mouseOverImage:E("hoverImage",this.$route.query.bingo)}},mounted(){this.$el.querySelector("input").addEventListener("focusout",this.handleFileSelect,!1)},methods:{handleFileSelect(e){const t=e.target.value;if(!t)return this.validation(!0),void C("hoverImage",this.$route.query.bingo,"");const n=new URL(t).hostname;if("cdn.discordapp.com"!==n)return void this.validation(!1);const i=t.split("?")[0],o=i.split(".").pop().toLowerCase();this.validExtensions.includes(o)?(this.validation(!0),C("hoverImage",this.$route.query.bingo,t)):this.validation(!1)},validation(e){const t=this.$el.querySelector("input");t.classList.remove(e?"is-invalid":"is-valid"),t.classList.add(e?"is-valid":"is-invalid")}}};const T=(0,y.Z)(M,[["render",z]]);var F=T;const R={class:"import-button"},U={class:"input-group"},H={class:"d-grid w-100"},P=(0,i._)("span",null,"Importiere ein Bingo",-1);function W(e,t,n,o,s,l){return(0,i.wg)(),(0,i.iD)("div",R,[(0,i._)("div",U,[(0,i._)("div",H,[P,(0,i._)("input",{type:"file",class:"form-control w-100",onChange:t[0]||(t[0]=(...e)=>l.importBingo&&l.importBingo(...e)),"aria-describedby":"inputGroupFileAddon04","aria-label":"Upload",ref:"file"},null,544)])])])}var Z={name:"ImportButtonAtom",methods:{importBingo(){const e=this.$refs.file.files[0],t=new FileReader;t.onload=t=>{const n=JSON.parse(t.target.result),i="application/json"===e.type||"object"===typeof n||5===n.bingo[0].length;if(!i)return void alert("Invalid file type or invalid JSON File. Please upload a JSON file.");const o=n.bingo,s=document.querySelector("table"),l=s.querySelectorAll("tr:not(:first-child)");for(let e=0;e<l.length;e++){const t=l[e],n=t.querySelectorAll("td");for(let i=0;i<n.length;i++){const t=n[i],s=t.querySelector("p");s.innerText=o[e][i].text;const l=t.querySelector(".bingo-box-field-data");l.dataset.multiSelectNumber=o[e][i].multiSelectNumber||0}}},alert("Successfully imported! Please save your bingo and reload the page to see all changes."),t.readAsText(e)}}};const Y=(0,y.Z)(Z,[["render",W]]);var J=Y;const K={class:"save-button"};function V(e,t,n,o,s,l){return(0,i.wg)(),(0,i.iD)("div",K,[(0,i._)("button",{class:"btn btn-success",onClick:t[0]||(t[0]=(...e)=>l.save&&l.save(...e))},"Save")])}var Q={name:"SaveButtonAtom",methods:{save(){const e=document.querySelector("table"),t=e.querySelectorAll("tr"),n=[];for(let i=0;i<t.length;i++){const e=t[i],o=e.querySelectorAll("td"),s=[];for(let t=0;t<o.length;t++){const e=o[t];s.push({text:e.innerText.trim(),multiSelectNumber:parseInt(e.querySelector(".bingo-box-field-data").dataset.multiSelectNumber)})}n.push(s)}n.shift(),C("bingo",this.$route.query.bingo,JSON.stringify(n)),alert("Successfully saved!")}}};const X=(0,y.Z)(Q,[["render",V]]);var ee=X;const te={class:"share-button"};function ne(e,t,n,o,s,l){return(0,i.wg)(),(0,i.iD)("div",te,[(0,i._)("button",{class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>l.share&&l.share(...e))},"Share")])}var ie={name:"ShareButtonAtom",methods:{share(){const e={hoverImage:E("hoverImage",this.$route.query.bingo),bingoGif:E("bingoGif",this.$route.query.bingo),bingo:E("bingo",this.$route.query.bingo,!0)},t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"});this.download(n)},download(e){const t=document.createElement("a");t.download="bingo.json",t.href=URL.createObjectURL(e),document.body.appendChild(t),t.click(),document.body.removeChild(t)}}};const oe=(0,y.Z)(ie,[["render",ne]]);var se=oe,le=n(577);const re={class:"section-bingo"},ae={class:"section-bingo--animation",id:"bingo-container"},ce=["src"],de={class:"bg-white show"},ue=(0,i._)("tr",{class:"user-select-none text-center fs-3"},[(0,i._)("th",{"data-fixed":"true"},"B"),(0,i._)("th",{"data-fixed":"true"},"I"),(0,i._)("th",{"data-fixed":"true"},"N"),(0,i._)("th",{"data-fixed":"true"},"G"),(0,i._)("th",{"data-fixed":"true"},"O")],-1),me=["data-trindex","data-tdindex","checked"],ge=["value","data-trindex","data-tdindex"];function he(e,t,n,o,s,l){const r=(0,i.up)("BingoBoxAtom");return(0,i.wg)(),(0,i.iD)("section",re,[(0,i._)("div",ae,[(0,i._)("img",{src:s.bingoGif,style:{visibility:"hidden"}},null,8,ce),(0,i._)("h1",null,(0,le.zw)(s.snippets.bingoTriggered),1),(0,i._)("table",de,[ue,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.tableData,((n,o)=>((0,i.wg)(),(0,i.iD)("tr",{key:n,class:"bingo-content"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n,((n,s)=>((0,i.wg)(),(0,i.iD)("td",{key:n,onClick:t[2]||(t[2]=(...e)=>l.selectTarget&&l.selectTarget(...e)),onContextmenu:t[3]||(t[3]=e=>l.rightClickHandler(e))},[(0,i._)("div",{class:(0,le.C_)(["multi-select-inputs d-flex",[e.$root.edit||"d-none"]])},[(0,i._)("input",{class:(0,le.C_)(["form-check-input multi-select-check-input",`multiSelect-${o}-${s}`]),type:"checkbox",onClick:t[0]||(t[0]=(...e)=>l.triggerMulitSelect&&l.triggerMulitSelect(...e)),"data-trindex":o,"data-tdindex":s,checked:n.multiSelectNumber>0},null,10,me),(0,i._)("input",{class:(0,le.C_)(["form-control multi-select-text-input",`multiSelect-${o}-${s}`]),type:"text",value:n.multiSelectNumber||2,"data-trindex":o,"data-tdindex":s,min:"1",max:"11",onChange:t[1]||(t[1]=(...e)=>l.updateMultiSelectNumber&&l.updateMultiSelectNumber(...e))},null,42,ge)],2),(0,i._)("div",{class:(0,le.C_)(["d-flex flex-column h-100",[n.multiSelectNumber>0?"justify-content-end":"justify-content-center"]])},[(0,i.Wm)(r,{tableContent:n},null,8,["tableContent"])],2)],32)))),128))])))),128))])])])}function be(){const e=document.querySelector(".section-bingo--animation");e.classList.add("section-bingo--animation--active"),e.querySelector("h1").style.opacity=1;const t=["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff"];let n=0;const i=setInterval((()=>{e.querySelector("h1").style.color=t[n],n++,n===t.length&&(n=0)}),100);setTimeout((()=>{e.querySelector("h1").style.opacity=0,e.classList.remove("section-bingo--animation--active"),clearInterval(i)}),5e3)}function pe(e){const t=document.querySelector(".section-bingo table"),n=t.querySelectorAll(".bingo-content"),i=t.querySelectorAll("td");let o=!1;const s=function(n){n.forEach((function(n){if(o)return!1;const i="number"===typeof n.cellIndex,s=i?t.querySelectorAll(`td:nth-child(${n.cellIndex+1})`):n.querySelectorAll("td"),l=s.length;let r=0;return s.forEach((function(e){"true"===e.querySelector(".bingo-box-field-data").dataset.selected&&r++})),e(r===l&&r>=5)}))};s(n),s(i);const l=(e,n)=>{const i=n.map(((n,i)=>t.querySelector(`.bingo-content:nth-child(${e+i}) td:nth-child(${n})`)));return i.every((e=>"true"===e.querySelector(".bingo-box-field-data").dataset.selected))},r=()=>l(2,[1,2,3,4,5]),a=()=>l(2,[5,4,3,2,1]);e(r()),e(a())}var fe=JSON.parse('{"z":[["","","","",""],["","","","",""],["","","","",""],["","","","",""],["","","","",""]]}');const ve=["data-selected","data-multi-select-number"],ye=["contenteditable"],Se={key:0,class:"bingo-box-multi row pointer-events-none d-flex justify-content-space-between mt-3"},xe=["data-multi-select-number"];function we(e,t,n,o,s,l){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("input",{hidden:"","data-selected":s.selected,"data-multi-select-number":s.multiSelectNumber,"data-times-pressed":"0","data-times-rounds":"0",class:"bingo-box-field-data d-none"},null,8,ve),(0,i._)("p",{class:(0,le.C_)([[e.$root.edit||"pointer-events-none"],"text-center user-select-none p-0 m-0 text-uppercase fw-bold py-2"]),contenteditable:e.$root.edit},(0,le.zw)(s.text),11,ye),s.multiSelectNumber>0?((0,i.wg)(),(0,i.iD)("div",Se,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.multiSelectNumber,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"bingo-box-multi--item pointer-events-none fw-bold text-black col"},[(0,i._)("input",{hidden:"","data-multi-select-number":e},null,8,xe)])))),128))])):(0,i.kq)("",!0)],64)}var $e={name:"BingoBoxAtom",props:{tableContent:{required:!0}},data(){return{text:this.tableContent.text,multiSelectNumber:this.tableContent.multiSelectNumber,selected:!1}},mounted(){const e=this.$el;this.changeFontSize(e),this.$el.nextElementSibling.nextElementSibling.addEventListener("input",(()=>{const e=this.$el;this.changeFontSize(e)})),this.$el.parentElement.addEventListener("mouseover",(()=>{if(this.$root.edit)return void(document.body.style.cursor="");const e=E("hoverImage",this.$route.query.bingo);document.body.style.cursor=`url(${e}) 4 12, auto`}))},methods:{changeFontSize(e){const t=e.nextElementSibling.nextElementSibling,n=parseInt(t.previousElementSibling.dataset.multiSelectNumber)>0,i=t.innerHTML;if(i.length<12)return void(t.style.fontSize="2rem");const o=n?40:30,s=o/i.length;t.style.fontSize=`${s}rem`,i.split(" ").forEach((e=>{const n=e.length;if(n>11){const e=15/n;t.style.fontSize=`${e}rem`}}))}}};const _e=(0,y.Z)($e,[["render",we]]);var qe=_e,Be={name:"BingoComponent",data(){return{tableData:E("bingo",this.$route.query.bingo,!0)||fe.z,bingoTriggered:!1,snippets:{bingoTriggered:"BINGO!!"},bingoGif:E("bingoGif",this.$route.query.bingo),colorOptions:{color0:"yellow",color1:"red",color2:"purple",color3:"blue",color4:"green"}}},mounted(){this.getBingo(),setInterval((()=>{this.getBingo()}),2e3),this.resizeBingoGif()},components:{BingoBoxAtom:qe},methods:{getBingo(){this.$root.socket&&(this.$root.socket.emit("Server:GetProject",this.$route.query.bingo.replaceAll(" ","")),this.$root.socket.on("Client:GetProject:Success",(e=>{this.tableData=e.data.bingo})),this.$root.socket.on("Client:GetProject:Error",(e=>{console.error(e)})))},resizeBingoGif(){const e=document.getElementById("bingo-container"),t=e.querySelector("img"),n=e.querySelector("table");t.style.width=n.offsetWidth-50+"px",t.style.height=`${n.offsetHeight}px`},rightClickHandler(e){e.preventDefault();const t=e.target,n=t.firstElementChild;if("true"===n.dataset.fixed)return;n.dataset.selected=!1,n.dataset.timesPressed=0,n.dataset.timesRounds=0,t.style.backgroundColor="";const i=n.dataset.multiSelectNumber>0;i&&t.querySelectorAll(".bingo-box-multi--item").forEach((e=>{e.style.backgroundColor=""}))},selectTarget(e){if(this.$root.edit)return;const t=e.target,n=t.querySelector(".bingo-box-field-data"),i="true"===n.dataset.fixed;if(i)return;let o,s=parseInt(n.dataset.timesPressed),l=parseInt(n.dataset.timesRounds),r="true"===n.dataset.selected;const a=parseInt(n.dataset.multiSelectNumber),c=a>0,d=this.colorOptions;c&&s>0?o=d[`color${l}`]:(o=d["color0"],r=!r);let u=null;if(c){r=!1,u=t.querySelector(`.bingo-box-multi--item input[data-multi-select-number="${s+1}"]`),u||(u=t.querySelector('.bingo-box-multi--item input[data-multi-select-number="1"]'),o=d[`color${l+1}`],n.dataset.timesRounds=l+1,s=0);const e=t.querySelector(`.bingo-box-multi--item input[data-multi-select-number="${s+2}"]`);e||(r=!0),u=u.parentElement}else u=t;u.style.backgroundColor=r||c?o:"",n.dataset.selected=r,n.dataset.timesPressed=s+1,pe((e=>{if(e){if(this.bingoTriggered)return;this.bingoTriggered=!0,be()}}))},triggerMulitSelect(e){const t=e.target,n=t.checked,i=t.dataset.trindex,o=t.dataset.tdindex,s={text:this.tableData[i][o].text,multiSelectNumber:2},l={text:this.tableData[i][o].text};this.tableData[i][o]=n?s:l},updateMultiSelectNumber(e){const t=e.target,n=t.dataset.trindex,i=t.dataset.tdindex,o=parseInt(t.value),s={text:this.tableData[n][i].text,multiSelectNumber:o};this.tableData[n][i]=s}}};const ke=(0,y.Z)(Be,[["render",he]]);var Ee=ke,Ce={name:"HomepageView",components:{BingoComponent:Ee,SaveButtonAtom:ee,EditButtonAtom:x,EditMouseOverButtonAtom:F,EditBingoGifButtonAtom:N,ShareButtonAtom:se,ImportButtonAtom:J},data(){return{show:!1}},mounted(){const e=this.$route.query.bingo;e&&(this.show=!0)},methods:{showSettings(){document.querySelector(".bingo-settings").classList.toggle("active")}}};const Ae=(0,y.Z)(Ce,[["render",b]]);var Ie=Ae}}]);
//# sourceMappingURL=Homepage.3b38eecf.js.map